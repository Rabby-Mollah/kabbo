<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kabbo's Malaysia Travel Checklist</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 650px;
      margin: auto;
      padding: 20px;
    }
    h2 {
      background: #ff4444;
      color: white;
      padding: 14px;
      border-radius: 10px;
      font-size: 24px;
      text-align: center;
    }
    .section, .sub-section {
      margin-bottom: 20px;
      border-radius: 10px;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    .section-header, .sub-section-header {
      padding: 14px 18px;
      font-weight: bold;
      cursor: pointer;
      border-bottom: 1px solid #ccc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .section-content, .sub-section-content {
      padding: 10px 18px;
      display: none;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    li {
      background: #fefefe;
      padding: 10px;
      margin-bottom: 6px;
      border-radius: 6px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
    }
    input[type="checkbox"] {
      margin-right: 12px;
      transform: scale(1.2);
    }
    .toggle-icon {
      font-size: 18px;
      transition: transform 0.2s ease;
    }
    .open .toggle-icon {
      transform: rotate(90deg);
    }
    .food .section-header {
      background-color: #6f4e37;
      color: white;
    }
    .place .section-header {
      background-color: #2e7d32;
      color: white;
    }
    .footer {
      text-align: center;
      background: #003333;
      color: #00ff99;
      font-weight: bold;
      padding: 30px 0;
      font-size: 26px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .chart-container {
      width: 100%;
      max-width: 400px;
      margin: 30px auto 20px;
    }
    .btn-reset {
      display: block;
      margin: 10px auto;
      padding: 10px 18px;
      background: #ff3333;
      color: white;
      border: none;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      body { font-size: 16px; }
    }
  </style>
</head>
<body>
<div class="container">
  <h2>Kabbo's Malaysia Travel Checklist</h2>

  <!-- Food Section -->
  <div class="section food">
    <div class="section-header" onclick="toggleSection(this)">üçõ Traditional Malaysian Dishes <span class="toggle-icon">‚ñ∂</span></div>
    <div class="section-content">
      <!-- Malay Dishes -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üá≤üáæ Malay Dishes <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Nasi Lemak</li>
            <li><input type="checkbox">Rendang</li>
            <li><input type="checkbox">Satay</li>
            <li><input type="checkbox">Laksa (Asam/Curry)</li>
            <li><input type="checkbox">Nasi Kerabu</li>
            <li><input type="checkbox">Ayam Percik</li>
            <li><input type="checkbox">Ikan Bakar</li>
          </ul>
        </div>
      </div>

      <!-- Chinese Dishes -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üá®üá≥ Chinese-Malaysian Dishes <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Char Kway Teow</li>
            <li><input type="checkbox">Hokkien Mee</li>
            <li><input type="checkbox">Chee Cheong Fun</li>
            <li><input type="checkbox">Yong Tau Foo</li>
            <li><input type="checkbox">Bak Kut Teh</li>
          </ul>
        </div>
      </div>

      <!-- Indian Dishes -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üáÆüá≥ Indian-Malaysian Dishes <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Roti Canai</li>
            <li><input type="checkbox">Nasi Kandar</li>
            <li><input type="checkbox">Thosai (Dosa)</li>
            <li><input type="checkbox">Tandoori Chicken</li>
            <li><input type="checkbox">Murtabak</li>
          </ul>
        </div>
      </div>

      <!-- Street Food -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üç¢ Street Food & Snacks <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Apam Balik</li>
            <li><input type="checkbox">Cendol</li>
            <li><input type="checkbox">Rojak</li>
            <li><input type="checkbox">Lok Lok</li>
            <li><input type="checkbox">Keropok Lekor</li>
          </ul>
        </div>
      </div>

      <!-- Drinks & Desserts -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üçπ Drinks & Desserts <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Teh Tarik</li>
            <li><input type="checkbox">Milo Dinosaur</li>
            <li><input type="checkbox">ABC (Ais Batu Campur)</li>
            <li><input type="checkbox">Kuih-muih</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Places Section -->
  <div class="section place">
    <div class="section-header" onclick="toggleSection(this)">üåè Places to Visit in Malaysia <span class="toggle-icon">‚ñ∂</span></div>
    <div class="section-content">
      <!-- Kuala Lumpur -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üèôÔ∏è Kuala Lumpur <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Petronas Twin Towers</li>
            <li><input type="checkbox">Batu Caves</li>
            <li><input type="checkbox">KL Tower</li>
            <li><input type="checkbox">Bukit Bintang</li>
            <li><input type="checkbox">Chinatown (Petaling Street)</li>
          </ul>
        </div>
      </div>

      <!-- Penang -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üé® Penang <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">George Town Street Art</li>
            <li><input type="checkbox">Kek Lok Si Temple</li>
            <li><input type="checkbox">Penang Hill</li>
            <li><input type="checkbox">Gurney Drive</li>
          </ul>
        </div>
      </div>

      <!-- Langkawi -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üèñÔ∏è Langkawi <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Langkawi Sky Bridge</li>
            <li><input type="checkbox">Pantai Cenang</li>
            <li><input type="checkbox">Island Hopping</li>
            <li><input type="checkbox">Langkawi Cable Car</li>
          </ul>
        </div>
      </div>

      <!-- Other Regions -->
      <div class="sub-section">
        <div class="sub-section-header" onclick="toggleSection(this)">üå¥ More Places <span class="toggle-icon">‚ñ∂</span></div>
        <div class="sub-section-content">
          <ul>
            <li><input type="checkbox">Cameron Highlands</li>
            <li><input type="checkbox">Genting Highlands</li>
            <li><input type="checkbox">Melaka Historical Sites</li>
            <li><input type="checkbox">Taman Negara</li>
            <li><input type="checkbox">Mount Kinabalu (Sabah)</li>
            <li><input type="checkbox">Sipadan Island (Diving)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Chart -->
  <div class="chart-container"><canvas id="progressChart"></canvas></div>
  <button class="btn-reset" onclick="resetChecklist()">üîÑ Reset Checklist</button>
  <div class="footer">Love from your Rabby</div>
</div>

<script>
  function toggleSection(header) {
    const parent = header.parentElement;
    const content = header.nextElementSibling;
    const icon = header.querySelector('.toggle-icon');
    const isOpen = parent.classList.contains('open');

    if (!isOpen) {
      parent.classList.add('open');
      content.style.display = 'block';
      icon.textContent = '‚ñº';
    } else {
      parent.classList.remove('open');
      content.style.display = 'none';
      icon.textContent = '‚ñ∂';
    }
  }

  function updateChart() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const total = checkboxes.length;
    const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
    const data = {
      labels: ["Done", "Remaining"],
      datasets: [{
        data: [checked, total - checked],
        backgroundColor: ["#2e7d32", "#ccc"],
      }]
    };
    const config = {
      type: 'pie',
      data: data,
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' },
          title: {
            display: true,
            text: `Checklist Completion: ${(checked / total * 100).toFixed(1)}%`
          }
        }
      }
    };
    const chartCanvas = document.getElementById('progressChart');
    if (window.myChart) window.myChart.destroy();
    window.myChart = new Chart(chartCanvas, config);
  }

  function saveChecklist() {
    const states = Array.from(document.querySelectorAll('input[type="checkbox"]')).map(cb => cb.checked);
    localStorage.setItem('malaysiaChecklist', JSON.stringify(states));
  }

  function loadChecklist() {
    const saved = JSON.parse(localStorage.getItem('malaysiaChecklist') || '[]');
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach((cb, i) => {
      cb.checked = !!saved[i];
    });
  }

  function resetChecklist() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    localStorage.removeItem('malaysiaChecklist');
    updateChart();
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadChecklist();
    updateChart();
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
      cb.addEventListener('change', () => {
        saveChecklist();
        updateChart();
      });
    });
  });
</script>
</body>
</html>
